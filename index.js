'use strict';module.exports=function(a,b){function c(f){var f=f||event,g=f.wheelDelta||-f.detail;if(0<g&&0==d.orgPar.scrollTop||0>g&&d.orgPar.scrollTop==d.orgPar.scrollHeight-d.orgPar.clientHeight)return f.preventDefault&&f.preventDefault(),!1}this.sbw=void 0==b?5:b;var d=this;this.element=document.querySelector(a),this.height=this.element.style.height,this.maxHeight=this.element.style.maxHeight,this.element.style.position='relative',this.orgPar=this.element.children[0],this.dirtion='',this.preStatus={},this.setOption=function(_ref){var f=_ref.dirtion;d.dirtion=f},this.init=function(){this.orgPar.style.cssText='height:100%;overflow-y:auto;overflow-x:hidden;padding-right: '+(this.sbw+20)+'px;width:100%;box-sizing:content-box;-moz-user-select: none;\n    -webkit-user-select: none;\n    -ms-user-select: none;\n    -khtml-user-select: none;\n    user-select: none; ',this.scrollBarHolder=document.createElement('div'),this.scrollBar=document.createElement('div'),this.scrollBarHolder.className='scrollbot-scrollbar-holder',this.showScrollBar=!1,this.scrollBarHolder.style.cssText='position:absolute;top:0;right:0px;height:100%;background:#222;width:'+this.sbw+'px;display:'+(this.showScrollBar?'block':'none'),this.scrollBar.className='scrollbot-scrollbar',this.scrollBar.style.cssText='position:absolute;top:0;right:0;height:20%;background:#666;width:'+this.sbw+'px;border-radius:2px',this.scrollBarHolder.appendChild(this.scrollBar),this.orgPar.appendChild(this.scrollBarHolder),this.scrollBarHolder.onmousedown=function(f){var g=d.orgPar.children[0].clientHeight,h=d.orgPar.clientHeight,i=100*(f.offsetY/h);d.orgPar.scrollTop=i/100*(g-h)},this.scrollBar.onmousedown=function(f){f.stopPropagation();var g=d.orgPar.children[0].clientHeight,h=d.orgPar.clientHeight,i=d.scrollBar.clientHeight,j=d.orgPar.scrollTop,k=f.pageY;document.onmousemove=function(l){var m=l.pageY;d.orgPar.scrollTop=j+(m-k)/(h-i)*(g-h)}},document.onmouseup=function(){document.onmousemove=null}},this.orgPar.addEventListener('scroll',function(){if(d.showScrollBar){var g=d.orgPar.children[0].clientHeight,h=d.orgPar.clientHeight,i=d.scrollBar.clientHeight,j=d.orgPar.scrollTop/(g-h);d.preStatus={top:d.orgPar.scrollTop,bottom:g-h-d.orgPar.scrollTop,innerHeight:g,outerHeight:h},d.scrollBar.style.top=100*j*(h-i)/h+'%'}});'onmousewheel'in this.orgPar?this.orgPar.onmousewheel=c:this.orgPar.addEventListener('DOMMouseScroll',c),this.setStyle=function(_ref2){var f=_ref2.block,g=_ref2.groove;for(var h in f)f.hasOwnProperty(h)&&'height'!==h&&(d.scrollBar.style[h]=f[h]);for(var i in g)g.hasOwnProperty(i)&&'height'!==i&&(d.scrollBarHolder.style[i]=g[i])},this.refresh=function(f){!d.height&&d.maxHeight&&(d.element.style.height='',d.element.style.height=d.element.clientHeight>d.maxHeight?d.maxHeight+'px':d.element.clientHeight+'px');var g=d.orgPar.children[0].clientHeight,h=d.orgPar.clientHeight;if(g<=h)return d.showScrollBar=!1,void(d.scrollBarHolder.style.display=''+(d.showScrollBar?'block':'none'));d.showScrollBar=!0,d.scrollBarHolder.style.display=''+(d.showScrollBar?'block':'none');d.scrollBar.style.height=100*(h/g)+'%';var j=0;'bottom'===d.dirtion&&(j=9999999999),'none'===d.dirtion&&(!f&&(j=d.preStatus.top),f&&(j=g-d.preStatus.innerHeight+d.preStatus.top)),d.orgPar.scrollTop=j},d.init(),d.refresh()};